var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function e(t,o,i){function r(a,s){if(!o[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(n)return n(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=o[a]={exports:{}};t[a][0].call(c.exports,function(e){var o=t[a][1][e];return r(o?o:e)},c,c.exports,e,t,o,i)}return o[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,o){!function(e){e(function(){var t={prizes:[],itemWidth:0,spaceBetween:.2,slidesOffsetBefore:.2,slidesOffsetAfter:.2,showLucky:!1},o=function(o,i){i=e.extend({},t,i);var r=0,n=e('<div id="prizes-wrapper"></div>');i.prizes.forEach(function(e,t){if(!e.hidden||"lucky"===e.prizeType&&i.showLucky){var o='<div class="prize-item" style="display: inline-block; margin-right: '+i.spaceBetween+'rem;" data-id="'+e.id+'" data-type="'+e.prizeType+'">';o+='<div class="prize-img-box"><img class="prize-img" src="'+e.image+'" /></div><p class="prize-name">'+e.title+"</p></div>",n.append(o),r++}});var a=r*(i.itemWidth+i.spaceBetween)+i.slidesOffsetAfter+i.slidesOffsetBefore;n.css({width:a+"rem","padding-left":i.slidesOffsetBefore+"rem","padding-right":i.slidesOffsetAfter+"rem"}),e(o).html(n).append('<div class="prize-tag"></div>'),e("#prizes-wrapper").attr("data-length",r)};window.prizesRender=o})}(Zepto)},{}],2:[function(e,t,o){!function(t){e("../../../../../unit/lib/lib-animate/1.0.0/animate"),e("../../components/prizesRender"),FastClick(document.body);var o={_UA:navigator.userAgent.toLowerCase(),lastResult:null,running:!1,options:null,init:function(){this._UA.match(/iphone|ipad/gi)?t(".apple").show():t(".apple").hide(),this.getStyle(),this.getOption(),this.events()},getStyle:function(){var e=this;e.getTuiaStyle({success:function(o){if(o.success){var i=[["#db-content","backgroundImage","bgImage"],["body","backgroundColor","bgColor"],[".record","backgroundImage","record"],[".rule-btn","backgroundImage","ruleBtn"],[".apple","backgroundColor","appleBgColor"],[".apple","color","appleTextColor"],[".theme","image","theme"],["#myCredits","color","myCreditsColor"],["#needCredits","color","myCreditsColor"],[".rule-modal .rule-modal-dialog section .probability .nav","backgroundColor","probabilityBgColor"],[".card","backgroundImage","card"],[".card.light","backgroundImage","cardActive"],[".dealer","image","dealer"],[".rule-modal .rule-modal-dialog","backgroundColor","ruleBgColor"],[".rule-modal .rule-modal-dialog section .probability","backgroundColor","ruleBgColor"],[".rule-modal .rule-modal-dialog header span,.rule-modal .rule-modal-dialog section .description","color","ruleTextColor"],[".rule-modal .rule-modal-dialog header i","backgroundColor","ruleTextColor"],[".rule-modal .rule-modal-dialog .close","color","ruleTextColor"],[".rule-modal .rule-modal-dialog section .probability .nav","backgroundColor","probabilityBg"],[".rule-modal .rule-modal-dialog section .probability .nav span","color","probabilityColor"],[".rule-modal .rule-modal-dialog section .probability.active .text","color","ruleTextColor"],[".description-scroller","html","ruleText"]];requireStyle.init(o,i),t("head").append("<style>.rule-modal .rule-modal-dialog section .probability .nav i{border-top-color: "+requireStyle.getStyle("probabilityColor")+" !important;border-left-color: "+requireStyle.getStyle("probabilityColor")+" !important;}</style>"),requireStyle.getStyle("probabilityText")&&(requireStyle.setConfig(".probability-scroller","html","probabilityText"),t(".probability").show()),window.isNew=o.data.isNew,setTimeout(function(){var e=new Image;e.src=requireStyle.getStyle("cardActive")},10),t("#db-content").show();var r=new Image;r.src=requireStyle.getStyle("card"),r.onload=function(){setTimeout(function(){e.dealCards()},500)}}else e.showModal("systemError",{message:o.desc})},error:function(){e.showModal("networkError")}})},getOption:function(){var e=this;e.getTuiaOptions({success:function(o){if(o.success){var i=o.data,r=i.options.length,n=["zero","one","two","three","four","five","six"][r];e.renderElement(i),t(".card-wrapper").addClass(n);for(var a=0;a<r;a++)t(".card-wrapper").append('<div class="card init"></div>');e.options=i.options,window.prizesRender("#prize-list",{prizes:i.options,itemWidth:.7,spaceBetween:.05,slidesOffsetBefore:.15,slidesOffsetAfter:0}),loader(function(){e.hasNoTimes&&e.showModal("over"),new IScroll("#prize-list",{scrollX:!0,scrollY:!1,mouseWheel:!1,scrollbars:!0,shrinkScrollbars:"clip",fadeScrollbars:!1}),initCouponPrize("1.5")})}}})},events:function(){var e=this;t("#prize-list").on("click",".prize-item",function(){new GetPrizeDetail({url:CFG.getPrizeDetail,prizeType:t(this).data("type"),data:{optionId:t(this).data("id")}})}),t("body").on("click",".recommend-modal .close",function(){e.reInit()}),t(".card-wrapper").on("click",".card",function(){e.gameStart(t(this))})},dealCards:function(){function e(){r<i.length?(i.eq(r).removeClass("init"),r++,setTimeout(e,300)):(o.running=!1,o.cardLight())}var o=this;if(!this.options)return void setTimeout(function(){o.dealCards()},1e3);var i=t(".card"),r=0;this.running=!0,e()},cardLight:function(){function e(){o.running||(t(".card").removeClass("light").eq(i).addClass("light"),i++,i=i>=r?0:i,setTimeout(e,600))}var o=this,i=0,r=t(".card").length;e()},gameStart:function(e){return!this.running&&(this.running=!0,t(".card").removeClass("light"),e.addClass("active"),t(".card-cover").show(),e.addClass("shake"),void this.getOrder())},gameOver:function(e){var o=this;buoyInit(o.isShowBuoy),t(".card.active").removeClass("shake").addClass("turn"),this.running=!1,setTimeout(function(){switch(e.data.result){case 0:o.showModal("noPrize");break;case 1:o.showModal("again");break;case 2:var i=e.data.lottery;if("coupon"==i.type||"lucky"==i.type){var r=function n(){window.couponFiles?window.showCouponPrize({result:e.data,callback:{close:function(){o.hideModal()},use:function(){t(".J_modalShowPrize").remove(),o.hideModal()}}}):setTimeout(function(){n()},200)};r()}else window.showObjectPrize({name:i.title,type:i.type,img:i.imgurl,onsubmit:function(){window.location.href=i.link},onclose:function(){o.hideModal()}});setTimeout(function(){o.gameReset()},100)}},400)},getOrder:function(){var e=this,t={};this.againOrderId&&(t.againOrderId=this.againOrderId),this.getTuiaOrder({data:t,success:function(t){var o=e.getTuiaErrorCode(t.code);"success"==o?(e.againOrderId=null,e.renderElement(t.data),e.isShowBuoy=t.data.isShowBuoy,setTimeout(function(){e.getLottery(t.data.orderId)},500)):"networkError"==o?e.showModal("networkError"):"over"==o?e.showModal("over"):"preview"==o&&e.showModal("preview")},error:function(t,o){"timeout"==o?(window.xhr&&window.xhr.abort(),e.showModal("systemError",{message:"璇锋眰瓒呮椂"})):e.showModal("networkError")}})},getLottery:function(e){var t=this;this.getTuiaLottery({data:{orderId:e,showVersion:!!window.isNew,skinId:getCouponPrize("1.5")||null},success:function(o){var i=t.getTuiaErrorCode(o.code);"success"==i?"wait"==o.data.status?setTimeout(function(){t.getLottery(e)},1e3):"success"==o.data.status&&t.gameOver(o):"networkError"==i?t.showModal("networkError"):t.showModal("noPrize")},error:function(e,o){"timeout"==o?(window.xhr&&window.xhr.abort(),t.showModal("systemError",{message:"璇锋眰瓒呮椂"})):t.showModal("networkError")}})},gameReset:function(){t(".card").removeClass("active shake turn"),t(".card-cover").hide(),t(".card").addClass("init")},showModal:function(e,t){var o=this,i=this.createErrorObject(e,t);"over"===i.type?window.recommendModal.show():(i.clickCallback=function(){o.hideModal()},window.errorMsgModal.show(i)),o.gameReset()},hideModal:function(){this.reInit(),this.hasNoTimes&&this.showModal("over")},reInit:function(){this.dealCards()},renderElement:function(e){t("#needCredits").html(this.getTuiaStatusText(e)).show(),e.limitTimes||CFG.preview?this.hasNoTimes=!1:this.hasNoTimes=!0}};o=t.extend({},o,Public),o.init()}(Zepto)},{"../../../../../unit/lib/lib-animate/1.0.0/animate":3,"../../components/prizesRender":1}],3:[function(e,t,o){var i="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof2(e)};!function(e){function t(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function o(e){return r?r+e:e.toLowerCase()}var r,n,a,s,l,d,c,u,f,p,m="",h={Webkit:"webkit",Moz:"",O:"o"},g=document.createElement("div"),y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,w={};e.each(h,function(e,t){if(void 0!==g.style[e+"TransitionProperty"])return m="-"+e.toLowerCase()+"-",r=t,!1}),n=m+"transform",w[a=m+"transition-property"]=w[s=m+"transition-duration"]=w[d=m+"transition-delay"]=w[l=m+"transition-timing-function"]=w[c=m+"animation-name"]=w[u=m+"animation-duration"]=w[p=m+"animation-delay"]=w[f=m+"animation-timing-function"]="",e.fx={off:void 0===r&&void 0===g.style.transitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:o("TransitionEnd"),animationEnd:o("AnimationEnd")},e.fn.animate=function(t,o,i,r,n){return e.isFunction(o)&&(r=o,i=void 0,o=void 0),e.isFunction(i)&&(r=i,i=void 0),e.isPlainObject(o)&&(i=o.easing,r=o.complete,n=o.delay,o=o.duration),o&&(o=("number"==typeof o?o:e.fx.speeds[o]||e.fx.speeds._default)/1e3),n&&(n=parseFloat(n)/1e3),this.anim(t,o,i,r,n)},e.fn.anim=function(o,r,m,h,g){var b,v,C,k={},T="",S=this,z=e.fx.transitionEnd,x=!1;if(void 0===r&&(r=e.fx.speeds._default/1e3),void 0===g&&(g=0),e.fx.off&&(r=0),"string"==typeof o)k[c]=o,k[u]=r+"s",k[p]=g+"s",k[f]=m||"linear",z=e.fx.animationEnd;else{v=[];for(b in o)y.test(b)?T+=b+"("+o[b]+") ":(k[b]=o[b],v.push(t(b)));T&&(k[n]=T,v.push(n)),r>0&&"object"===("undefined"==typeof o?"undefined":i(o))&&(k[a]=v.join(", "),k[s]=r+"s",k[d]=g+"s",k[l]=m||"linear")}return C=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(z,C)}else e(this).unbind(z,C);x=!0,!e(this).attr("stop")&&e(this).css(w),h&&h.call(this)},r>0&&(this.bind(z,C),setTimeout(function(){x||C.call(S)},1e3*(r+g)+25)),this.size()&&this.get(0).clientLeft,this.css(k),r<=0&&setTimeout(function(){S.each(function(){C.call(this)})},0),this},g=null}(Zepto)},{}]},{},[2]);